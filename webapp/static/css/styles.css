/* ===== Slovekiza Mini-App UI (v18) ===== */
:root{
  --bg:#0e1013; --bg-2:#12151a;
  --surface:#15181d; --surface-2:#181c22; --elev:#0f1216;
  --text:#e9edf3; --muted:#9aa3af;
  --brand:#ff6b6b; --brand-d:#e25a5a;
  --stroke:#222833; --stroke-2:#2b3240;
  --radius:16px; --shadow:0 8px 24px rgba(0,0,0,.25);
  --headerH:84px; --headerPadTop:6px; --headerPadBottom:18px; --tabbarH:74px;
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font:14px/1.45 Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  color:var(--text);
  background:linear-gradient(180deg,var(--bg),var(--bg-2) 85%);
  -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
}

/* Header */
.app-header{
  position:fixed; top:0; left:0; right:0; z-index:10; height:var(--headerH);
  display:grid; grid-template-columns:1fr auto; align-items:end; gap:12px;
  padding:var(--headerPadTop) 16px var(--headerPadBottom);
  background:rgba(16,18,22,.88); backdrop-filter:saturate(140%) blur(8px);
  border:1px solid var(--stroke); border-radius:0 0 var(--radius) var(--radius); overflow:hidden;
}
.app-header::after{content:""; position:absolute; left:10px; right:10px; bottom:0; height:1px; border-radius:999px;
  background:linear-gradient(90deg,transparent,rgba(255,255,255,.14),transparent)}
.hdr-left,.hdr-right{display:flex; align-items:center; gap:10px}
.hdr-left{min-width:0; cursor:pointer}
.avatar{width:32px; height:32px; border-radius:50%; object-fit:cover; background:linear-gradient(135deg,#23262d,#1b1e24); border:1px solid var(--stroke)}
.nick{font-weight:600; font-size:12px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; max-width:160px}
.nick-sub{font-size:10px; color:var(--muted)}
.balance{display:flex; flex-direction:column; align-items:flex-start; line-height:1.05}
.balance-label{font-size:10px; color:var(--muted)} .balance-value{font-size:12px; font-weight:600}
.btn-plus{width:32px; height:32px; border-radius:10px; border:0; display:grid; place-items:center; cursor:pointer; color:#fff;
  background:linear-gradient(180deg,var(--brand) 0%,var(--brand-d) 100%)} .btn-plus:active{transform:translateY(1px)}
.btn-plus svg{width:18px; height:18px}

/* Content */
.app-main{padding:calc(var(--headerH) + 12px) 16px calc(var(--tabbarH) + env(safe-area-inset-bottom) + 16px); min-height:100dvh}
.page{display:none} .page.active{display:block}

/* Categories */
.cats-list{display:flex; flex-direction:column; gap:12px}
.cat{display:flex; align-items:center; gap:14px; padding:16px; border-radius:16px;
  background:linear-gradient(180deg,#15181d,#111419); border:1px solid var(--stroke);
  box-shadow:0 6px 18px rgba(0,0,0,.18); text-decoration:none; color:var(--text); transition:transform .08s,border-color .2s}
.cat:hover{transform:translateY(-1px); border-color:var(--stroke-2)} .cat:active{transform:translateY(0)}
.cat-icon{width:48px; height:48px; border-radius:12px; display:grid; place-items:center; background:linear-gradient(180deg,#1a1e24,#14181e); border:1px solid var(--stroke)}
.cat-icon img{width:26px; height:26px; display:block}
.cat-body{display:flex; flex-direction:column; gap:2px}
.cat-name{font-weight:700; font-size:15px} .cat-desc{font-size:12px; color:var(--muted)}
.cats-list::after{content:"Скоро добавим ещё категорий"; display:block; text-align:center; color:var(--muted); font:500 13px/1.4 Inter,system-ui; opacity:.95; padding:18px 8px 12px}

/* Services */
.subheader{display:grid; grid-template-columns:auto 1fr auto; align-items:center; gap:10px; margin:6px 0 12px}
.subheader .back{appearance:none; border:1px solid var(--stroke); background:var(--surface-2); color:var(--text); border-radius:10px; padding:8px 10px; cursor:pointer}
.subheader-title{margin:0; font-size:16px; font-weight:800}
.search{position:relative; display:block}
.search input{width:220px; max-width:55vw; padding:10px 36px 10px 12px; border-radius:10px; border:1px solid var(--stroke); background:var(--surface-2); color:var(--text)}
.search svg{position:absolute; right:10px; top:50%; transform:translateY(-50%); width:18px; height:18px; opacity:.8}
.services-list{display:flex; flex-direction:column; gap:10px}
.service{display:flex; justify-content:space-between; align-items:center; gap:10px; padding:14px; border-radius:14px; background:linear-gradient(180deg,#15181d,#111419); border:1px solid var(--stroke); cursor:pointer}
.service .left{display:flex; flex-direction:column; gap:4px}
.service .name{font-weight:700} .service .meta{font-size:12px; color:var(--muted)}
.service .price{font-weight:800; color:#ff6b6b}
.service .btn{appearance:none; border:1px solid var(--stroke); background:var(--surface-2); color:var(--text); border-radius:10px; padding:8px 10px; cursor:pointer}

/* Order page */
.order-card{background:linear-gradient(180deg,#16191e,#12151a); border:1px solid var(--stroke); border-radius:16px; padding:16px}
.order-head{display:flex; gap:12px; align-items:center; margin-bottom:8px}
.order-icon{width:38px; height:38px; border-radius:10px; border:1px solid var(--stroke); background:#111}
.order-name{font-weight:800; font-size:15px}
.order-meta{font-size:12px; color:var(--muted)}
.order-block{margin-top:12px}
.order-block-title{font-weight:700; margin-bottom:8px}
.qty-presets{display:grid; grid-template-columns:repeat(3,1fr); gap:8px; margin-bottom:8px}
.preset{display:grid; place-items:center; padding:10px; border-radius:12px; border:1px solid var(--stroke); background:var(--surface-2); cursor:pointer}
.preset.active{outline:2px solid var(--brand); border-color:transparent}
.order-input{width:100%; padding:10px 12px; border-radius:10px; border:1px solid var(--stroke); background:var(--elev); color:var(--text)}
.order-minmax{margin-top:6px; font-size:12px; color:var(--muted)}
.order-hint{margin-top:6px; font-size:12px; color:var(--muted)}
.order-row{display:flex; justify-content:space-between; align-items:center; padding:10px 0; border-top:1px solid var(--stroke)}
.fav-title{display:flex; align-items:center; gap:6px}
.switch{position:relative; width:46px; height:26px; display:inline-block}
.switch input{display:none}
.switch .slider{position:absolute; inset:0; background:#2a303a; border-radius:999px; transition:.2s}
.switch .slider:before{content:""; position:absolute; height:20px; width:20px; left:3px; top:3px; background:#fff; border-radius:50%; transition:.2s}
.switch input:checked + .slider{background:#3bde86}
.switch input:checked + .slider:before{transform:translateX(20px)}
.order-total{display:flex; justify-content:space-between; align-items:center; padding:12px 0; border-top:1px solid var(--stroke)}
.order-price{font-weight:800; color:#ff6b6b; font-size:16px}
.order-submit{width:100%}

/* Tabbar */
.tabbar{
  position:fixed; left:0; right:0; bottom:env(safe-area-inset-bottom); z-index:20;
  height:var(--tabbarH); display:grid; grid-template-columns:repeat(4,1fr);
  gap:0; padding:10px 12px; background:rgba(14,16,20,.92); backdrop-filter:blur(8px) saturate(140%);
  border:1px solid var(--stroke); border-radius:var(--radius) var(--radius) 0 0; overflow:hidden;
}
.tabbar::before{content:""; position:absolute; left:10px; right:10px; top:0; height:1px; border-radius:999px; background:linear-gradient(90deg,transparent,rgba(255,255,255,.12),transparent)}
.tab{position:relative; display:flex; flex-direction:column; align-items:center; justify-content:center; gap:6px; padding:8px 6px; border:0; background:transparent; border-radius:12px; color:var(--text); font-size:10px; font-weight:500; cursor:pointer; transition:background .2s,color .2s,transform .08s}
.tab:active{transform:scale(.98)} .tab:hover{background:rgba(255,255,255,.035)}
.tab .tab-icon{width:20px; height:20px; display:block; opacity:.9}
.tab.active{background:linear-gradient(180deg,rgba(255,255,255,.07),rgba(255,255,255,.02)); box-shadow:inset 0 0 0 1px rgba(255,255,255,.06), 0 6px 16px rgba(0,0,0,.18)}
.tab.active .tab-icon{opacity:1}

/* Modal stub removed — попап пополнения инлайном в JS */

/* Scrollbars off */
body,.page,.app-main,.cats-list,.services-list{scrollbar-width:none;-ms-overflow-style:none}
body::-webkit-scrollbar,.page::-webkit-scrollbar,.app-main::-webkit-scrollbar,.cats-list::-webkit-scrollbar,.services-list::-webkit-scrollbar{width:0;height:0}

/* Responsive */
@media (min-width:520px){ .nick{max-width:220px} .search input{width:280px} }
